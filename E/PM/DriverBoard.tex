\documentclass[a4paper,12pt]{article}
%\documentclass[letterpaper,12pt]{report}

\usepackage{ucs}
\usepackage[utf8x]{inputenc}
\usepackage[english]{babel}
\usepackage{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage[hmargin=2cm,vmargin=2.5cm]{geometry}

% Space out paragraphs, don't indent
 \setlength{\parindent}{0.0in}
 \setlength{\parskip}{0.1in}



\usepackage[dvips]{hyperref}

\author{John P. Doty}
\date{\today}
\title{SXI Driver Board Design}

\begin{document}
\begin{titlepage}
\maketitle
\begin{center}
\verb$Id$
\end{center}
\vspace{5cm}

This work is Copyright 2010 Noqsi Aerospace, Ltd.

This work is licensed under the Creative Commons Attribution-Share Alike 3.0 License. To view a copy of this license, visit http://creativecommons.org/licenses/by-sa/3.0/ or send a letter to Creative Commons, 171 Second Street, Suite 300, San Francisco, California, 94105, USA.

\end{titlepage} 

\section{Introduction}
This document describes the circuits on the driver board for the Soft X-ray Imager under development for the ASTRO-H high energy astronomy mission.

This version of the design is intended for resource estimation and preliminary review. This document will evolve as the design evolves.

In the SXI focal plane, there will be four Hamamatsu CCD-PchNeXT4 sensor chips. Each chip will have its own driver board. 

The nominal horizontal clock timing has a complex rhythm, with a minimum half cycle time of 2.4\ $\mu$s, and a sustained rate of 138.888\ kHz during readout. Vertical clock half cycles will be 14.4\ $\mu$s, and the vertical cock rate during frame transfer will be 34.722\ kHz. Available regulated voltages will be +15V, -15V, and +3.3V. 

%These parameters were established after many of these circuits were first drawn, so they should be checked, particularly for adequate voltage breakdown margin.

\subsection{Requirements}
Tables \ref{Clocks}, \ref{CIClocks} and \ref{Biases} derive primarily from the CCD-PchNeXT4 specsheet. Required voltage precision is based on previous CCD experience. The last column identifies the circuit that must meet the requirement, for reference.

\begin{table}[h]
\centering
\begin{tabular}{|l|rrrr|rrrr|r|l|}
\hline
&\multicolumn{4}{c|}{Low(V)}&\multicolumn{4}{c|}{High(V)}& C(pF)& Driver Circuit \\ 
&Min.&Typ.&Max.&Prec.&Min.&Typ.&Max&Prec.&& \\
\hline
RG & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 160 & Serial-driver \\
SG & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 160 & Serial-driver \\
TG & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 180 & Serial-driver \\
P1VI & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 70000 & Parallel \\
P2VI & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 70000 & Parallel \\
P1VS & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 50000 & Parallel \\
P2VS & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 50000 & Parallel \\
PXH & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 230 & Serial-driver \\
PXH/ & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 230 & Serial-driver \\
PYH & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 130 & Serial-driver \\
PYH/ & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 130 & Serial-driver \\
PZH & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 130 & Serial-driver \\
PZH/ & -8 & -7 & -6 & 0.1 & +2 & +3 & +4 & 0.1 & 130 & Serial-driver \\
\hline
\end{tabular}
 \caption{CCD Clocks.}
 \label{Clocks}
\end{table}

Exactly what the capacitances represent isn't clearly defined on the specsheet, although it appears likely that they are gate-gate capacitance for the two phase clocks, and gate-substrate for single ended clocks. More on this in section \ref{ClockDrivers}.

\begin{table}[h]
\centering
\begin{tabular}{|l|rrrr|rrrr|r|l|}
\hline
&\multicolumn{4}{c|}{Low(V)}&\multicolumn{4}{c|}{High(V)}& C(pF)& Driver Circuit \\ 
&Min.&Typ.&Max.&Prec.&Min.&Typ.&Max&Prec.&& \\
\hline
IG1V & -15? & ? & +15? & 0.01? & -15? & ? & +15? & 0.01? & 230 & Serial-driver? \\
IG2V & -15? & ? & +15? & 0.01? & -15? & ? & +15? & 0.01? & 230 & Serial-driver? \\
ISV & -18? & ? & 0? & 0.01? & -18? & ? & 0? & 0.01? & ? & Serial-driver? \\
\hline
\end{tabular}
 \caption{Charge Injection Clocks.}
 \label{CIClocks}
\end{table}

Table \ref{CIClocks} shows the charge injection clocks. These are separated out as the charge injection strategy will depend on the outcome of charge injection experiments in progress. The drivers will probably be similar to the drivers for the other low capacitance clocks, perhaps with minor modification depending on the final requirements.

\begin{table}[h]
\centering
\begin{tabular}{|l|rrrr|r|l|}
\hline
&\multicolumn{4}{c|}{Bias(V)} &mA&Driver Circuit \\
&Min.& Typ.& Max.&Prec& Max.&\\
\hline
OD-A &-22 &-20& -18& 0.1&1.2&DC-driver \\
OD-B &-22 &-20& -18& 0.1&1.2&DC-driver \\
OD-C &-22 &-20& -18& 0.1&1.2&DC-driver \\
OD-D &-22 &-20& -18& 0.1&1.2&DC-driver \\
RD &-13& -12 &-11& 0.1&0.001&DC-driver \\
OG& -7& -5& -3&  0.1&0.001&DC-driver \\
ISV & -18? & ? & 0? & 0.01? & 0.001 & DC-driver \\
BB &+20 &+30 &+40 &0.5&0.001&BB \\
\hline
\end{tabular}
 \caption{Biases.}
 \label{Biases}
\end{table}

ISV may be either a clock or a DC bias (but not both) depending on the outcome of charge injection experiments in progress.

% Experience suggests that a clock driver time constant of 1/10 the clock period  is sufficiently small. 

%The heaviest loads for the Serial-driver block are P1H and P3H, with 12\ V max swings into 320\ pF at 132\ kHz. Output resistance of $<$2.3\ k$\Omega$ and peak current capability of $>$30\ mA will achieve  the required time constant of $<$750\ ns. IG1V and IG2V have larger swings, but they synchronize with the slower vertical clocks, so they need no more peak current.

%The heaviest loads on the Parallel block are the Vertical imaging area clocks, with 12\ V max swings into 100\ nF 


%I've pulled these together from a variety of documents: they need verification. The clock requirements  %are much less challenging than I assumed when I designed these blocks.

%Vertical clock voltages: (+2,-6) nominal, high level adjustable (0 to +10), low level adjustable (-10 to 0).

%Two vertical phases, two sections (imaging and storage). Total vertical clock capacitance 20nF. Clock rate 32 kHz. Nominal clock current, derived from the numbers above, is 5 mA.
%Horizontal clock voltages:  (+6,-5) nominal, high level adjustable (0 to +10), low level adjustable (-10 to 0).

%Three horizontal phases, four sections. Total horizontal clock capacitance 1.28nF. Clock rate 136 kHz. Nominal clock current, derived from the numbers above, is 2 mA.

%Four output drains, operating range -18V to -22V, 1.2mA nominal each. Absolute maximum voltage -25V. Independently adjustable.

%Output gate voltage range -10V to 0, nominal -5.

%Drivers should have capacity of at least twice nominal current.

%ISV, ID: what are current requirements?



\section{Building Block Details}
\subsection{Infrastructure}
\subsubsection{REF}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{REF.pdf}
   \end{center}
   \caption{REF Block}
   \end{figure}

The REF block provides a 2.5V reference voltage for the DAC and driver circuits. The REF43 has flown successfully on a number of missions, including Suzaku. 2.5V seems a good choice for a reference in a system whose low voltage supply is 3.3V. The capacitors implement the recommended bypassing for the REF43.
R1 provides current limiting and decoupling.

% Issues:
% \begin{enumerate}
% \item
% Is there a preferred part for this other than the REF196?
% \item
% There is no current limit on VL. Should there be one here, or should it be handled at a higher level?
% \end{enumerate}

\subsubsection{DAC}
% Needed: 2? per CCD, 8? per SXI
%Two blocks gives us 16 DAC's, enough for (OD*4,RD,RG+-,OG,BB,H+-,V+-,IG+-,ISV). Is that enough, 
% or do we need three?
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DAC.pdf}
   \end{center}
   \caption{DAC Block}
   \end{figure}
The AD5308 DAC chip provides a buffered output from 0V to (255/256) of the reference voltage. R1 provides decoupling and current limiting in case of latchup.

Issues:
\begin{enumerate}
\item
CMOS DAC chips tend to be sensitive to radiation dose. The radiation environment for ASTRO-H is not severe, so I do not expect a problem. However, I have no radiation data on this device, so I have a small concern.
\end{enumerate}

\subsection{Bias Drivers}
\subsubsection{BB}

The BB (Back Bias) block consists of a Cockroft-Walton charge pump voltage multiplier and a regulator. It provides the high voltage needed to deplete the main volume of the CCD and drive charge from the backside to the channel.

   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{BB.pdf}
   \end{center}
   \caption{BB Block}
   \end{figure}
%Needed: 1 per CCD, 4 per SXI
%Half of U1 and its associated components form the driver for the output gate (OG) electrodes. These require almost no current, only leakage, but they are adjacent to the charge sense nodes, so they are sensitive to noise. The filter formed by R6 and C6 is intended to strongly attenuate noise at the video frequency. However, this filter potentially destabilizes the driver circuit: C3 provides phase-advanced feedback to stabilize the circuit. If the feedback time constant $R5\times C3$ is four times the output time constant $R6\times C6$, the circuit is critically damped, assuming that this time constant is also large compared to the amplifier's unity gain small signal response time. This approach to noise reduction and stabilization is employed in several other driver blocks below.

%Minimum output voltage is $-2.5\times(R5/R7)$ or $-7.5V$ when the DACOG DAC is set to 255. Maximum is $0V$ when DACOG is set to $0$.

U2 switches between $Vp$ and $Vm$ $(\pm15V)$, creating 30V square-wave drive for a charge pump. The switching frequency, applied to PCLK, should be at the pixel rate to minimize the effect of crosstalk and ripple on the video signal. D1, D2, and their associated capacitors form a two stage charge pump, nominally capable of 60V output if losses are ignored. C4 is intentionally fairly small to limit current at startup and under fault conditions. $1nF\times30V\times132kHz=4.2mA$ into the pump under short circuit conditions. That's 2.1mA into the pump output.
% , although there is little quantitative reasoning behind this specific value. 
The other capacitors in the pump (C1, C2, C5) are larger to minimize ripple and loss.

Q1 and Q2 are high voltage transistors making a voltage translation amplifier with gain of about 3.7 (set by $R11/R10$)and an offset roughly equal to the pump output voltage. Applying a negative voltage to R10 thus reduces the output voltage (BB). Half of U1 provides this negative drive. R9 and R10 set the gain at 16, so the maximum output voltage is 40V. The output time constant is $R12\times C10$, or about 1 ms. In this case, the damping effect of C11 is reduced by the gain of the voltage translation stage, so for critical damping the $R9\times C11$ time constant should be $(3.7\times4)$ or 15ms. As drawn, it's 16 ms, for a little overdamping. With the output of U1 at the negative rail, the output is nominally $60V-3.7\times15V$ or about 4.5V, ignoring losses and diode drops. That's well below the required minimum of 20V.

43V precision Zener diode D3 limits the output voltage to below the absolute maximum of 45V without preventing an output of the maximum operating voltage of 40V.

The load current on BB is $<1\ \mu$A The voltage regulator and housekeeping circuit pull $100\ \mu$A from the pump, much less than the 2\ mA limit.

R1, R2, and R3 limit current to U2, protecting it in case of latchup. R13 and R14 limit current to U1, although that's less of a concern: U1 is not CMOS so it should be more resistant to latchup. These resistors also help decouple chip power from power supply noise and ripple.

Output filter capacitors have separate return connections here so that they may be connected for best EMI performance at the higher level.

%Issues:%\begin{enumerate}%\item%OG output range doesn't match requirement.%\item%C6 shown returned to board ground. This may not be the best from a noise perspective. Signal return topology requires some thought.%\item%With $\pm15V$ supplies now specified, R10 could be increased to 330k, reducing the translation gain and improving the damping.%\end{enumerate}%



\subsubsection{DC-driver}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DC-driver.pdf}
   \end{center}
   \caption{DC-driver Block}
   \end{figure}

This provides negative DC drive for the various bias lines. These lines are potentially a path for noise to reach the CCD video output. The filter formed by R2 and C2 is intended to attenuate noise at the video frequency. RETA should go to the sensor analog ground point, which should have a low impedance to system ground.
However, this filter potentially destabilizes the driver circuit: C1 provides phase-advanced feedback to stabilize the circuit. If the feedback time constant $R1\times C1$ is four times the output time constant $R2\times C2$, the circuit is critically damped, assuming that this time constant is also large compared to the amplifier's unity gain small signal response time, which it is in this case $(120\mu s>>1 \mu s)$. When critically damped, the circuit has two poles with time constant $2\times R2\times C2$.

The LT1078 opamp used can drive $>5mA$, so it has plenty of margin in this circuit: the maximum load for this circuit is 1.2mA when driving one of the output drains. 

The input is a current into a virtual ground, allowing resistors to set scale and offset individually for each of these circuits.

V+ should normally be 3.3V to prevent positive drive from pulling the opamp input above the positive rail. V- can be -15V if adequate, or the -30V from the OD-pump block if needed.

%Needed: 1 per CCD, 4 per SXI
%Drives ID and ISV.


\subsubsection{OD-pump}

   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{OD-pump.pdf}
   \end{center}
   \caption{OD-pump Block}
   \end{figure}
   
This charge pump provides -30V (nominal assuming no losses). It is a single stage design, pumping negative charge from a 15V square wave signal using the -15V supply as its "ground". It is intended to be able to drive at least 10 mA. Q3, Q4, and their associated resistors form a current limiter to protect against an output short circuit. R4 and R5 protect U1 against latchup.


%\subsection{OD-driver}
%   \begin{figure}
%   \begin{center}
 %  \begin{tabular}{c}
%   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{OD-driver.pdf}
%   \end{tabular}
%   \end{center}
%   \end{figure}

%This provides drive for two output drains. Full scale on the DAC corresponds to -24V on the output. The transistors boost the opamp output current.

%Needed: 2 per CCD, 8 per SXI
%Drives OD for each output.

%Issues:
%\begin{enumerate}
%\item
%C2 and C4 shown returned to board ground. This may not be the best from a noise perspective. Signal return topology requires some thought.
%\end{enumerate}

\pagebreak
\subsection{CCD Clock Drivers}
\label{ClockDrivers}
Figure \ref{ClockCap} shows a model of the two phase CCD clock capacitances.  Because of the symmetry of the two phase drive, the gate-substrate and gate-gate capacitances may be combined into a single effective driver load capacitance, $Cdl=Cgs+2Cgg$. Unfortunately, the spec sheet apparently gives $Cgg$ for the capacitance.

For the VI clocks, we have more detailed estimates: 62.5\ nF for Cgg and 31.25\ nF for Cgs. In this case, the effective driver load is 156.25\ nF. This compares to the 70\ nF on the spec sheet. We'll therefore estimate the effective load capacitance as 2.5 times that given on the spec sheet.

Maximum clock swing $\Delta V$ is 12V for all clocks. The dynamic current the power supply needs to provide is $f\times C \times \Delta V$. For the fast (horizontal) clocks $f$ is 136 kHz, so this is about 1.7\ mA/nF. For the slow (vertical) clocks $f$ is 32 kHz, so this is about 0.4\ mA/nF.

   \begin{figure}[h]
   \begin{center}
   \includegraphics[height=10cm,angle=0,keepaspectratio=true]{ClockCap.pdf}
   \caption{Two phase drive allows simplification of the model of clock capacitance.}
   \label{ClockCap}
   \end{center}
   \end{figure}

\subsubsection{DACtoClock}

   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DACtoClock.pdf}
   \end{center}
   \caption{DACtoClock Block}
   \end{figure}

%Needed: 4? per CCD, 16? per SXI
%Translates DAC voltages to clock voltages. I assume we need:
%Reset Gate
%Horizontal
%Vertical
%Input Gate
%But there are questions:
%I assume voltages for VI==VS==TG. Is this true?
%I assume voltages for horizantal==SG. Is this true?
%I assume charge injection voltages for IG1==IG2. Is this true?

This is a pair of amplifiers yielding adjustable outputs of 0 to 5V and -10V to -5V for drivers. Noise filtering and damping are similar to the DC-driver block above, but with larger capacitance to handle the time-varying load current. These can directly provide the regulated drive for the fast clock drivers: with output current capability $\approx 10$\ mA, they can handle the current demands of a $\approx 6$\ nF load. For the slow (vertical), drivers, these handle level translation but do not provide the large regulated current required.

\subsubsection{ParallelReg}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{ParallelReg.pdf}
   \end{center}
   \caption{ParallelReg Block}
   \end{figure}

These are overload-protected high current regulators intended for clocking of a high capacitance CCD. One design challenge here is that the duty cycle is low. To avoid excessive power drain, the idle current must be minimized. Another challenge is providing the required peak current without danger of overheating. An upset or programming error can  potentially raise the duty cycle to the point where power dissipation could cause damage.

The NPN "transistors" in this block are LM195 "Ultra Reliable Power Transistor" integrated circuits. These devices protect themselves against excessive current and temperature. One problem, though, is that they pass idle currents of up to 5 mA. Connecting them in series with MOSFET devices cuts off idle emitter current, although a fraction of the idle current can still pass out through the base. A base resistor limits the idle base current, and also prevents parasitic Colpitts "emitter follower oscillations". The combinations (Q1, Q2, R1) and (Q4, Q5, R4) each behave like a MOSFET with a leaky gate. The main difference from the MOSFET by itself is that the LM195 limits the current and power dissipation. At high current, the LM195 handles most of the dissipation, so its thermal limit engages well before the MOSFET  is in danger of overheating.

Additional LM195 devices, Q3 and Q6, limit supply current and provide some decoupling. In this connection, they act like $\approx 1\Omega$ resistors below their $>1$A current limits. Short circuit failures of C1 or C4 can not disable the whole SXI, only one chip.

The (C1, R3) and (C3, R6) combinations reduce the high frequency output impedance, reducing transient voltage excursions. They also stabilize the closed loop regulation. The closed loop gain is unity.

These regulators can deliver $>1$A peak (corresponding to a 2500\ nF load) and $>30$ mA average current. Idle current is  $\approx 2$ mA from the +15V supply and $\approx 3$ mA from the -15V supply for the regulator pair.

\subsubsection{ParallelPair}

   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{ParallelPair.pdf}
   \end{center}
   \caption{ParallelPair Block}
   \end{figure}

This is a high current driver intended for high speed clocking of a high capacitance CCD. Connecting the drive transistors in a common source configuration insures break before make switching. The output resistors R1 and R2 insure that the source voltage follows the gate voltage closely enough to prevent gate-source breakdown, regardless of the magnitude of the capacitive load. The other resistors limit fault currents due to latchup or output short circuits and provide decoupling.

\subsubsection{SerialDrivers}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{SerialDrivers.pdf}
   \end{center}
   \caption{SerialDrivers Block}
   \end{figure}
   
This is just a pair of analog switches, intended to drive a moderate capacitance clock. The resistors limit fault currents due to latchup or output short circuits and provide decoupling.

\subsection{Temperature Control}

\subsubsection{Temperature Measurement}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{Temperature.pdf}
   \end{center}
   \caption{Temperature Block}
   \end{figure}
   
This low speed 16 bit ADC is connected as a ratiometric ohmmeter. It compares the sensor resistance with R1, which sets the maximum scale. $1180\ \Omega$ for a Pt1000 sensor corresponds to a temperature of 46\ C.

\subsubsection{Heater Control}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{TempControl.pdf}
   \end{center}
   \caption{TempControl Block}
   \end{figure}

The first section of U1 buffers 1/10 the heater supply voltage (Vhtr) as a reference for DAC U2. The second section of U1 together with Q1 is a differential amplifier with a gain of 10, controlling the voltage at Ihtr.  If the heater is connected between Vhtr and Ihtr, the heater voltage will be proportional to the DAC setting, with full scale equal to Vhtr. In practice, it won't quite reach that value because of saturation of Q1.

Q1 is an LM195, which will protect itself against overheating. It also has limited transconductance, $\approx\ 1$\ S, which helps stability. C1 provides stabilizing feedback, much more than required for any reasonable heater resistance.

As drawn, this circuit accommodates heater supply voltages up to 20V (limited by U1's output swing). This can be changed by resistor changes if a larger supply is to be used.

\subsection{Housekeeping}

\subsubsection{Housekeeping ADC}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{hkadc.pdf}
   \end{center}
   \caption{Housekeeping ADC Block}
   \end{figure}

This is a low speed 16 bit ADC with a high Z input whose range is $\pm 12.5$\ V.

\section{Connecting the Blocks}

The top level schematics indicate interconnections between pages with bus symbols.

\begin{tabular}{ll}
Power & Board internal power \\
DAC & DAC output and reference voltages \\
Control & Digital controls and clocks \\
Output & CCD Driver outputs \\
HK & Housekeeping test points \\
\end{tabular}

These graphical indicators do not necessarily imply the existence of physical busses on the board.

\subsection{Reference and DACs}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.1.pdf}
   \end{center}
   \caption{Reference and DACs}
   \end{figure}
   
This provides the 2.5V reference voltage and 24 DAC channels for control of CCD clock and bias levels.
  

\subsection{RG and SG Drivers}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.2.pdf}
   \end{center}
   \caption{RG and SG Drivers}
   \end{figure}

This drives the reset gate and summing gate. These gates have low capacitance, so drive requirements are not challenging. For best clock level stability, these should be driven perfectly periodically, even during vertical transfers. There is no harm in doing so, and this will reduce variation of the video bias across the CCD image.
  

\subsection{TG Driver}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.3.pdf}
   \end{center}
   \caption{TG Driver}
   \end{figure}
   
This drives the transfer gate between the vertical and horizontal register of the CCD. This is another low capacitance gate. This page also shows a spare driver: this may be used for charge injection when the requirements are clarified.
  

\subsection{Horizontal Register Driver}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.4.pdf}
   \end{center}
   \caption{Horizontal Register Driver}
   \end{figure}
   
The data sheet capacitances for these clocks total 1380\ pF. Applying the factor of 2.5 above for the effective capacitance, the total effective capacitance is $\approx 3.5$\ nF. A single DACtoClock block (drive capability $\approx 6$\ nF) suffices to provide the regulated drive voltages.
  

\subsection{VI Driver}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.5.pdf}
   \end{center}
   \caption{VI Driver}
   \end{figure}

The total effective capacitance of the to vertical imaging clocks is $\approx 350$\ nF, well within the 2500\ nF capacity of the ParallelReg block supplying the regulated drive voltage.

\subsection{VS Driver}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.6.pdf}
   \end{center}
   \caption{VS Driver}
   \end{figure}

The vertical storage area has lower capacitance that the vertical imaging area, so a similar drive circuit suffices.

\subsection{Output Drain Drivers}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.7.pdf}
   \end{center}
   \caption{Output Drain Drivers}
   \end{figure}

These provide -17 to -23\ V for the output drains. Maximum load per drain is 1.2\ mA, no a challenge for a DC-driver block.  

\subsection{Bias Drivers}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.8.pdf}
   \end{center}
   \caption{Bias Drivers}
   \end{figure}
  
The reset drain driver provides -10 to -14\ V. 
The output gate driver provides -2 to -8\ V.
The back bias driver provides 0 to 40\ V.

\subsection{Power Translation}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.9.pdf}
   \end{center}
   \caption{Power Translation}
   \end{figure}
  
A small amount of power (total nominally $<1$\ mA, but probably somewhat larger due to dynamic power consumption) is required a +5V by the DG403 switches and the CS5507 ADC's, and at -5V by the CS5507 ADCs. The LT1078 opamps we are using for other functions have more than enough current capability here and will be highly efficient. Because all loads are resistively decoupled, there will be no capacitive instability issue with this approach.
  
The OD-pump provides $\approx -28$\ V for the output drain drivers, and possibly for charge injection also (TBD).

\subsection{Bias and Power Housekeeping}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.10.pdf}
   \end{center}
   \caption{Bias and Power Housekeeping}
   \end{figure}

The multiplexers on this page feed bias and power supply voltages to the housekeeping ADC. Most of these are outside the $\pm 12.5$\ V range of the ADC, so 4X attenuators reduce the voltages.

\subsection{Clock Level Housekeeping}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.11.pdf}
   \end{center}
   \caption{Clock Level Housekeeping}
   \end{figure}

The multiplexers on this page feed clock levels to the housekeeping ADC. The driver board temperature monitor signal is also included here.

\subsection{Housekeeping ADC}

   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.12.pdf}
   \end{center}
   \caption{Housekeeping ADC}
   \end{figure}

This page just shows the board-level connections of the HKADC block.

\subsection{Video Housekeeping}

   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.13.pdf}
   \end{center}
   \caption{Video Housekeeping}
   \end{figure}


R47 provides a load for an AD590 temperature sensor on the video board. This circuit also monitors references and the power supply.

\subsection{Command Decoding}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.14.pdf}
   \end{center}
   \caption{Command Decoding}
   \end{figure}

\subsection{CCD Clock Decoding}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.15.pdf}
   \end{center}
   \caption{CCD Clock Decoding}
   \end{figure}

\subsection{Digital Power}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.16.pdf}
   \end{center}
   \caption{Digital Power}
   \end{figure}

\subsection{LVDS Drivers}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.17.pdf}
   \end{center}
   \caption{LVDS Drivers}
   \end{figure}

\subsection{LVDS Receivers}
   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{DriverBoard.18.pdf}
   \end{center}
   \caption{LVDS Receivers}
   \end{figure}



\subsection{Charge Injection}

Requirements TBD. Will be based on DC and serial driver blocks, possibly with small modifications.

\section{TCE}

   \begin{figure}
   \begin{center}
   \includegraphics[height=16cm,angle=90,keepaspectratio=true]{TCE.pdf}
   \end{center}
   \caption{TCE}
   \end{figure}


Each driver board will have the footprints for Temperature Control Electronics, but only two of the four boards will populate these with components.

\section{External interfaces}

The primary reference for the external interfaces of the driver board is the "SXIFE" document. This section lists the connectors and designates their pins.

\subsection{Interface to Video Board}

Table \ref{J1} shows the pinout of J1. All LVDS signals to and from the video board pass through this connector.

Table \ref{J2} shows the pinout of J2. CCD clocks and biases, focal plane temperature data and drive, video board power, and video board housekeeping signals pass through this connector.

\begin{table}[h]
\centering
\begin{tabular}{|l|l|l|l|}
\hline
 Connector & Pin & Signal & Description \\
\hline
\input{J1}
\hline
\end{tabular}
\caption{J1}
\label{J1}
\end{table}

\begin{table}[h]
\centering
{\small
\begin{tabular}{|l|l|l|l|}
\hline
 Connector & Pin & Signal & Description \\
\hline
\input{J2}
\hline
\end{tabular}
}
\caption{J2}
\label{J2}
\end{table}

\subsection{Digital/Power Interface to PE}

Table \ref{J3} shows the pinout of J3, through which power and data pass from the Pixel Electronics to the Driver Board.

Table \ref{J4} shows the pinout of J4, through which data passes from the Driver Board to the Pixel Electronics.

\begin{table}[h]
\centering
{\small
\begin{tabular}{|l|l|l|l|}
\hline
 Connector & Pin & Signal & Description \\
\hline
\input{J3}
\hline
\end{tabular}
}
\caption{J3}
\label{J3}
\end{table}

\begin{table}[h]
\centering
{\small
\begin{tabular}{|l|l|l|l|}
\hline
 Connector & Pin & Signal & Description \\
\hline
\input{J4}
\hline
\end{tabular}
}
\caption{J4}
\label{J4}
\end{table}


  
\end{document}
